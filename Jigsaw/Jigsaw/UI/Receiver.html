<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Entire bundle -->
    <script src="https://cdn.jsdelivr.net/npm/@shopify/draggable@1.0.0-beta.8/lib/draggable.bundle.js"></script>
    <style>
       .droppable {
            width: 200px;
            height: 200px;
            border: solid;
            display: flex;
        }
    </style>
</head>

<body>
    <h1>Receiver:</h1>
    <table class="puzzle">
        <tr>
            <td>
                <div class="droppable"><img class="slot-1" class="img" /></div>
            </td>
            <td>
                <div class="droppable"><img class="slot-2" class="img" /></div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="droppable"><img class="slot-3" class="img" /></div>
            </td>
            <td>
                <div class="droppable"><img class="slot-4" class="img" /></div>
            </td>
        </tr>
    </table>

</body>

</html>
<script>

    // const containers = document.querySelectorAll('.block')

    // console.log(containers);

    // const droppable = new Draggable.Droppable(containers, {
    //     draggable: '.draggable',
    //     droppable: '.droppable'
    // });

    // console.log(droppable);

    // droppable.on('drag:start', () => console.log('drag:start'));
    // droppable.on('droppable:over', () => console.log('droppable:over'));
    // droppable.on('droppable:out', () => console.log('droppable:out'));

    const swappable = new Draggable.Swappable(document.querySelectorAll('.puzzle'), {
        draggable: 'img'
    });

    swappable.on('swappable:start', () => console.log('swappable:start'));
    swappable.on('swappable:swapped', () => console.log('swappable:swapped'));
    swappable.on('swappable:stop', () => console.log('swappable:stop'));

    $(document).ready(function () {

        const imageSource = "/UI/Images/";

        $.get("/Game/id?id=1", function (data, status) {
            //console.log(data);

            $("[class^='slot']").each(function (i, e) {
                this.src = imageSource + data.currentState[i] + ".jpg";
                //console.log(this);
                this.onclick = function () {
                    alert(this.className + " " + this.src);
                }
            })
        });
    });
</script>